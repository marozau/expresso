@import play.api.i18n.Messages
@import controllers.AssetsFinder
@import clients.PublishingHouse
@import java.time.format.DateTimeFormatter

@(edition: PublishingHouse.ReadyEdition)(implicit request: RequestHeader, messages: Messages, assets: AssetsFinder)

    @editionUrl = @{
        edition
                .url
                .map(_.toString)
                .getOrElse(
            controllers.site.routes.ArchiveController.edition(
                edition.newsletter.nameUrl,
                edition.date.format(DateTimeFormatter.BASIC_ISO_DATE)
            ).absoluteURL())
    }

    @views.html.site.main(edition.title.get) {

        @views.html.site.container {

            @views.html.site.preheader("https://www.expresso.today")

            @views.html.site.header(edition.date)

            @views.html.site.body {

                @views.html.site.text {
                    <div style="text-align: center;">
                        <em>
                            <span style="font-size: 17px">
                                <span style="font-family: georgia, times, times new roman, serif">
                                @{
                                    edition.header.get(edition.config)
                                }
                                </span>
                            </span>
                        </em>
                    </div>
                }

                @for(post <- edition.posts) {
                    @views.html.site.text {
                        <font face="arial, helvetica neue, helvetica, sans-serif" size="5">
                            <a href="@controllers.site.routes.ArchiveController.post(edition.newsletter.nameUrl, edition.date.format(DateTimeFormatter.BASIC_ISO_DATE), post.titleUrl).absoluteURL()">
                                <strong>@post.title</strong>
                            </a>
                        </font>
                    }
                    @views.html.site.divider()
                    @views.html.site.text {
                        <div style="text-align: left;">
                            <span style="font-family: georgia, times, times new roman, serif">
                            @post.body(post.config)
                            </span>
                        </div>
                    }
                }

                @views.html.site.text {
                    <div style="text-align: left;">
                        <span style="font-size: 17px">
                            <span style="font-family: georgia, times, times new roman, serif">
                                ***
                                <br>
                                @{
                                    edition.footer.get(edition.config)
                                }
                            </span>
                        </span>
                    </div>
                }

                @views.html.site.regards()

                @views.html.site.url(editionUrl)

                @views.html.site.share(s"${edition.newsletter.name}: ${edition.title.get}", editionUrl)

                @views.html.site.channels()
                @views.html.site.footer()
            }
        }
    }

