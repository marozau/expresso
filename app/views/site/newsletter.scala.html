@import play.api.i18n.Messages
@import controllers.AssetsFinder
@import clients.PublishingHouse
@import java.time.format.DateTimeFormatter

@(edition: PublishingHouse.ReadyEdition)(implicit messages: Messages, assets: AssetsFinder)

@views.html.site.main {
    @views.html.site.head(edition.title.get) {

        @views.html.site.date(edition.date)

        @views.html.site.image {
            @views.html.site.ex._image(assets.path("images/expresso_logo.png"), Some("http://www.expresso.today"))
        }

        @views.html.site.text {
            <div style="text-align: center;">
                <em>
                    <span style="font-size: 17px">
                        <span style="font-family: georgia, times, times new roman, serif">
                        @{
                            edition.header.get(edition.config)
                        }
                        </span>
                    </span>
                </em>
            </div>
        }

        @for(post <- edition.posts) {
            @views.html.site.text {
                <font face="arial, helvetica neue, helvetica, sans-serif" size="5">
                    <a href="@controllers.site.routes.ArchiveController.post(edition.newsletter.nameUrl, edition.date.format(DateTimeFormatter.BASIC_ISO_DATE), post.titleUrl)">
                        <strong>@post.title</strong>
                    </a>
                </font>
            }
            @views.html.site.divider()
            @views.html.site.text {
                <div style="text-align: left;">
                    <span style="font-family: georgia, times, times new roman, serif">
                    @post.body(post.config)
                    </span>
                </div>
            }
        }

        @views.html.site.text {
            <div style="text-align: left;">
                <span style="font-size: 17px">
                    <span style="font-family: georgia, times, times new roman, serif">
                        ***
                        <br>
                        @{
                            edition.footer.get(edition.config)
                        }
                    </span>
                </span>
            </div>
        }

        @views.html.site.regards()

        @views.html.site.url(
            edition
                    .url
                    .map(_.toString)
                    .getOrElse(
                controllers.site.routes.ArchiveController.edition(edition.newsletter.nameUrl, edition.date.format(DateTimeFormatter.BASIC_ISO_DATE)).url)
        )
    }

}

